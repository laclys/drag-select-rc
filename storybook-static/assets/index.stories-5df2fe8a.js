import{r as v,R as q}from"./index-8db94870.js";import{a as ee}from"./chunk-OPEUWD42-a3b45fd8.js";import{g as te}from"./_commonjsHelpers-042e6b4d.js";var J={exports:{}},B={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=v,oe=Symbol.for("react.element"),re=Symbol.for("react.fragment"),le=Object.prototype.hasOwnProperty,se=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ce={key:!0,ref:!0,__self:!0,__source:!0};function X(r,t,l){var o,c={},d=null,u=null;l!==void 0&&(d=""+l),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(u=t.ref);for(o in t)le.call(t,o)&&!ce.hasOwnProperty(o)&&(c[o]=t[o]);if(r&&r.defaultProps)for(o in t=r.defaultProps,t)c[o]===void 0&&(c[o]=t[o]);return{$$typeof:oe,type:r,key:d,ref:u,props:c,_owner:se.current}}B.Fragment=re;B.jsx=X;B.jsxs=X;J.exports=B;var z=J.exports;const y=z.jsx,F=z.jsxs;var G={exports:{}};(function(r){var t=function(){function l(i,a){return a!=null&&i instanceof a}var o;try{o=Map}catch{o=function(){}}var c;try{c=Set}catch{c=function(){}}var d;try{d=Promise}catch{d=function(){}}function u(i,a,x,w,R){typeof a=="object"&&(x=a.depth,w=a.prototype,R=a.includeNonEnumerable,a=a.circular);var P=[],A=[],U=typeof Buffer<"u";typeof a>"u"&&(a=!0),typeof x>"u"&&(x=1/0);function s(e,f){if(e===null)return null;if(f===0)return e;var n,g;if(typeof e!="object")return e;if(l(e,o))n=new o;else if(l(e,c))n=new c;else if(l(e,d))n=new d(function(O,D){e.then(function(T){O(s(T,f-1))},function(T){D(s(T,f-1))})});else if(u.__isArray(e))n=[];else if(u.__isRegExp(e))n=new RegExp(e.source,M(e)),e.lastIndex&&(n.lastIndex=e.lastIndex);else if(u.__isDate(e))n=new Date(e.getTime());else{if(U&&Buffer.isBuffer(e))return Buffer.allocUnsafe?n=Buffer.allocUnsafe(e.length):n=new Buffer(e.length),e.copy(n),n;l(e,Error)?n=Object.create(e):typeof w>"u"?(g=Object.getPrototypeOf(e),n=Object.create(g)):(n=Object.create(w),g=w)}if(a){var C=P.indexOf(e);if(C!=-1)return A[C];P.push(e),A.push(n)}l(e,o)&&e.forEach(function(O,D){var T=s(D,f-1),Z=s(O,f-1);n.set(T,Z)}),l(e,c)&&e.forEach(function(O){var D=s(O,f-1);n.add(D)});for(var m in e){var j;g&&(j=Object.getOwnPropertyDescriptor(g,m)),!(j&&j.set==null)&&(n[m]=s(e[m],f-1))}if(Object.getOwnPropertySymbols)for(var k=Object.getOwnPropertySymbols(e),m=0;m<k.length;m++){var p=k[m],E=Object.getOwnPropertyDescriptor(e,p);E&&!E.enumerable&&!R||(n[p]=s(e[p],f-1),E.enumerable||Object.defineProperty(n,p,{enumerable:!1}))}if(R)for(var W=Object.getOwnPropertyNames(e),m=0;m<W.length;m++){var L=W[m],E=Object.getOwnPropertyDescriptor(e,L);E&&E.enumerable||(n[L]=s(e[L],f-1),Object.defineProperty(n,L,{enumerable:!1}))}return n}return s(i,x)}u.clonePrototype=function(a){if(a===null)return null;var x=function(){};return x.prototype=a,new x};function h(i){return Object.prototype.toString.call(i)}u.__objToStr=h;function S(i){return typeof i=="object"&&h(i)==="[object Date]"}u.__isDate=S;function _(i){return typeof i=="object"&&h(i)==="[object Array]"}u.__isArray=_;function b(i){return typeof i=="object"&&h(i)==="[object RegExp]"}u.__isRegExp=b;function M(i){var a="";return i.global&&(a+="g"),i.ignoreCase&&(a+="i"),i.multiline&&(a+="m"),a}return u.__getRegExpFlags=M,u}();r.exports&&(r.exports=t)})(G);var ie=G.exports;const ae=te(ie),K=r=>{let t;if(r.touches){const l=r.touches[0];t=document.elementFromPoint(l.clientX,l.clientY)}else for(t=r.target;t.tagName!=="TD";)t=t.parentNode;return{row:t.parentNode.rowIndex,column:t.cellIndex}},I=(r,t,l=window,o=!1)=>{const c=v.useRef(t);v.useEffect(()=>{c.current=t},[t]),v.useEffect(()=>{if(!(l&&l.addEventListener))return;const u=h=>c.current(h);return l.addEventListener(r,u,o),()=>{l.removeEventListener(r,u,o)}},[r,l,o])},N=r=>{const[t,l]=v.useState(!1),[o,c]=v.useState(0),[d,u]=v.useState(0),[h,S]=v.useState(0),[_,b]=v.useState(0),[M,i]=v.useState(!1),{value:a,onChange:x}=r,w=s=>{const e=s.button===0,f=s.type!=="mousedown";if(t&&(e||f)){const n=ae(a),g=Math.min(o,h),C=Math.max(o,h);for(let m=g;m<=C;m++){const j=Math.min(d,_),k=Math.max(d,_);for(let p=j;p<=k;p++)n[m][p]=M}l(!1),x(n)}},R=s=>{const e=s.button===0,f=s.type!=="mousedown";if(!t&&(e||f)){s.preventDefault();const{row:n,column:g}=K(s);l(!0),c(n),u(g),S(n),b(g),i(!a[n][g])}},P=s=>{if(t){s.preventDefault();const{row:e,column:f}=K(s);(h!==e||_!==f)&&(S(e),b(f))}},A=(s,e)=>{const f=Math.min(o,h),n=Math.max(o,h),g=Math.min(d,_),C=Math.max(d,_);return t&&s>=f&&s<=n&&e>=g&&e<=C};return I("mouseup",w),I("touchend",w),y("table",{className:"table-drag-select",children:y("tbody",{children:(()=>q.Children.map(r.children,(s,e)=>y("tr",{...s.props,children:q.Children.map(s.props.children,(f,n)=>y(ue,{onTouchStart:R,onTouchMove:P,selected:r.value[e][n],...f.props,selecting:A(e,n)?1:0,children:f.props.children},`${n}_CELL`))},e)))()})})},ue=r=>{const t=v.useRef();let{className:l="",disabled:o,selecting:c,selected:d,onTouchStart:u,onTouchMove:h}=r;o?l+=" cell-disabled":(l+=" cell-enabled",d&&(l+=" cell-selected"),c&&(l+=" cell-being-selected"));const S=b=>{o||u(b)},_=b=>{o||h(b)};return I("touchstart",S,t.current,{passive:!1}),I("touchend",_,t.current,{passive:!1}),y("td",{ref:t,className:l,onMouseDown:S,onMouseMove:_,...r,children:r.children||y("span",{children:" "})})},Q=N;try{N.displayName="DragSelect",N.__docgenInfo={description:"",displayName:"DragSelect",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"boolean[][]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(val: boolean[][]) => void"}}}}}catch{}const fe=["一","二","三","四","五","六","日"],ve={title:"DragSelect",component:Q},$=()=>{const[r,t]=v.useState(de());return F(Q,{value:r,onChange:o=>{ee("draged!"),console.log("val",o),t(o)},children:[F("tr",{children:[y("td",{disabled:!0,children:"星期/时段"}),Array(24).fill(null).map((o,c)=>y("td",{disabled:!0,children:`${c}-${c+1}`},c))]}),Array(7).fill(null).map((o,c)=>F("tr",{children:[y("td",{disabled:!0,children:fe[c]}),Array(24).fill(null).map((d,u)=>y("td",{},u))]},`${c}__TR`))]})},de=()=>{let r=new Array(8);for(let t=0;t<r.length;t++)r[t]=new Array(25).fill(!0);return r};var V,Y,H;$.parameters={...$.parameters,docs:{...(V=$.parameters)==null?void 0:V.docs,source:{originalSource:`() => {
  // eslint-disable-next-line react-hooks/rules-of-hooks
  const [cells, setCells] = useState(initCellsFunc());
  const changeDrag = (val: React.SetStateAction<any[]>) => {
    action('draged!');
    console.log('val', val);
    setCells(val);
  };
  return <DragSelect value={cells} onChange={changeDrag}>
      <tr>
        <td disabled>星期/时段</td>
        {Array(24).fill(null).map((item, index) => <td disabled key={index}>{\`\${index}-\${index + 1}\`}</td>)}
      </tr>
      {Array(7).fill(null).map((item, index) => {
      return <tr key={\`\${index}__TR\`}>
              <td disabled>{WEEK_S[index]}</td>
              {Array(24).fill(null).map((ele, idx) => <td key={idx} />)}
            </tr>;
    })}
    </DragSelect>;
}`,...(H=(Y=$.parameters)==null?void 0:Y.docs)==null?void 0:H.source}}};const _e=["index"];export{_e as __namedExportsOrder,ve as default,$ as index};
//# sourceMappingURL=index.stories-5df2fe8a.js.map
